---
title: イベント駆動型
date: 2020-09-29
description: イベント駆動型
tags: ["base-of-linux"]
---

# イベント駆動型
## イベント駆動とは
Linuxに限らず、多くのOSのカーネルはほとんどの場合、自発的に動作することはない。ハードウェアやコマンド、アプリケーションなどから指示があった場合にだけ処理を実行する。
このように何らかのイベントを動作のトリガーにしているプログラムを**イベント駆動型プログラム**という。
カーネルの処理のトリガーになりうるイベントには主に3種類ある。周辺機器からCPUに送られる信号による**ハードウェア割り込み**、ソフトウェアの動作によってCPU内で発生する**ソフトウェア割り込み/例外**、そしてアプリケーションが発行する**システムコール**の3種類である。


## 割り込みとは
**割り込み**とは現在の作業を中断して、別の作業をすることすることである。ほとんどのCPUは割り込みをサポートしている。

```mermaid

sequenceDiagram
    # エイリアス
    participant time as 時間経過
    participant main as 処理中のプログラム
    participant interrupt as 割り込み

    # データ取得コード
    Note right of main: 割り込みベクターを調べて<br>割り込み信号に対応した<br>割り込みハンドラーを実行
    main->>+interrupt: 割り込みベクター
    activate interrupt
    Note over interrupt: 割り込みハンドラー
    interrupt->>-main: 割り込み終了
    Note right of main: 割り込みハンドラーの処理終了後<br>もとのプログラムを再開する

```

